#include <gtest/gtest.h>

#include "superpositeur/Circuit.hpp"
#include "superpositeur/DefaultOperations.hpp"

namespace superpositeur {
namespace {
Circuit randomCircuit() {
    using namespace std::complex_literals;

    Circuit c;
    c.addInstruction(CircuitInstruction({ default_operations::CNOT }, { QubitIndex{ 1 }, QubitIndex{ 0 } }));

    c.addInstruction(CircuitInstruction({ Matrix{ { -0.1274825223688183 + 0.10352724067755686i, 0.048622991324199116 + -0.17274482732976973i }, { -0.30501944149470545 + 0.3766451437087603i, 0.08290916228049697 + 0.027419592172238244i } }, Matrix{ { -0.4267721835739121 + 0.23957752410982563i, 0.4252827255970465 + 0.49970377309012004i }, { 0.18348058772631354 + -0.1612166283708655i, 0.06323201273213179 + 0.11396459100522438i } }, Matrix{ { -0.06463958733277841 + 0.13676065234140136i, -0.17517673838052839 + -0.1609039924912889i }, { 0.3315886895353491 + 0.36632915718996495i, -0.1214067691250022 + 0.4211768533010771i } }, Matrix{ { -0.16894336074229932 + -0.19478887493802902i, -0.2601417685825914 + -0.005269505859579289i }, { -0.19071472795730085 + 0.26278802061606066i, -0.27013975517997146 + -0.3510416906215367i } } }, { QubitIndex{ 2 } }));

    c.addInstruction(CircuitInstruction({ Matrix{ { 0.2755425740157862 + -0.04416806783347679i, 0.1769753356033341 + 0.1567077426383006i }, { -0.05279884221739011 + -0.1376891042428975i, 0.5680945873009043 + -0.08523716437737064i } }, Matrix{ { -0.06200486071448305 + -0.416392007067887i, 0.16131271730569458 + -0.0027228019007451004i }, { 0.19936000045028662 + -0.5834543138432274i, -0.24297911291264823 + -0.20263251487009154i } }, Matrix{ { -0.1465137782803388 + -0.06305192963724603i, 0.002082426043055594 + -0.2563314772107891i }, { 0.08663206923727491 + -0.10849148193003437i, 0.003065348497824017 + -0.027849107834915163i } }, Matrix{ { -0.2657532255012 + 0.2098228553418822i, -0.3107268361562709 + -0.21498075891021726i }, { -0.3795607112893449 + -0.19888469253966243i, 0.1001700803081983 + 0.5183633065624235i } } }, { QubitIndex{ 1 } }));

    c.addInstruction(CircuitInstruction({ Matrix{ { -0.4341362757485716 + -0.17176655424423656i, -0.007502911811290819 + -0.26784487207130203i }, { 0.24155245714272877 + 0.1242126700894487i, 0.2885250642654834 + 0.5308304783241562i } }, Matrix{ { 0.38935118695812426 + 0.28808950480801326i, -0.08574275450199122 + -0.163705332453316i }, { -0.11837505314381971 + 0.05078866201808836i, 0.07097069376205255 + -0.3881316104666552i } }, Matrix{ { 0.5941070472337125 + -0.10136410446524297i, -0.24733471105275856 + -0.30355254021298617i }, { 0.16126531544414363 + -0.056164498421529624i, -0.012254008324568242 + 0.2508016362036094i } }, Matrix{ { -0.11571280997844019 + -0.05524087023486979i, 0.10113117970771564 + 0.03526573720878338i }, { 0.06136945453192149 + -0.21084942687891142i, -0.11480608907555752 + -0.36375682526922737i } } }, { QubitIndex{ 1 } }));

    c.addInstruction(CircuitInstruction({ default_operations::CNOT }, { QubitIndex{ 1 }, QubitIndex{ 2 } }));


    
    return c;
}

TEST(RandomizedIntegrationTests, 3_5_2_100_30_20) {
    auto c = randomCircuit();

    c.execute();
}
}

}
