#include <gtest/gtest.h>

#include "superpositeur/Circuit.hpp"
#include "superpositeur/DefaultOperations.hpp"

namespace superpositeur {
namespace {
Circuit randomCircuit() {
    using namespace std::complex_literals;

    Circuit c;
    c.addInstruction(CircuitInstruction({ Matrix{ { 0.0016777528722267119 + 0.024330709653151532i, -0.02935959050560243 + -0.05691478035948701i, 0.07002722827224764 + -0.11601472314016491i, -0.11554465954514759 + 0.04710805065547087i }, { -0.024774704582126817 + -0.12047434728972338i, 0.03821793108261586 + 0.11926044669891832i, 0.034653536592301554 + 0.041191237819164464i, 0.06908689078187961 + 0.059829838924978i }, { -0.03295743238107077 + 0.01564123066306831i, -0.048153789068226635 + -0.04104119636467197i, 0.04415529041583887 + 0.07763651249202462i, 0.01801023873398399 + -0.028509375845772716i }, { -0.0754124077429032 + -0.019656846859271528i, 0.03656049240082369 + 0.271151693302297i, 0.09219031479057548 + 0.1416065550405913i, 0.08670659820050917 + -0.01805821144244072i } }, Matrix{ { 0.1623899734605357 + 0.21968889304058725i, 0.08979831238435271 + -0.03956247233408962i, 0.0010526215161933141 + -0.05206015800511873i, -0.021730153856268433 + -0.04189657859928982i }, { -0.06472518172399222 + -0.07296295655738047i, -0.014655368573242261 + 0.129695731014529i, 0.1394224461295691 + 0.11388709455346772i, -0.04262177236175747 + 0.1858478480831207i }, { 0.037980101031650955 + 0.048227788039635046i, 0.16503157879683245 + 0.01352394535998054i, -0.0759004925337443 + -0.07615679147094526i, -0.03536809596396439 + 0.008477640905155352i }, { -0.06304978213522057 + -0.0630920025006519i, -0.016102295790207003 + 0.06838832524191105i, 0.0310350808523866 + -0.10612830885180129i, -0.09723738466046546 + 0.07320145629855192i } }, Matrix{ { 0.0212904792878579 + -0.004169985540356564i, -0.08392853418933938 + -0.0480585599480133i, 0.05538733574186813 + 0.09778531651999248i, 0.03793301461113156 + 0.056260042872652835i }, { -0.19538936678427543 + 0.03364746722421122i, 0.06590606665541061 + 0.1423553743445453i, 0.0390521513437628 + -0.024138156091475526i, -0.03610984611142383 + 0.04294033027298013i }, { -0.021211401013810218 + 0.01139147597694422i, 0.01815301704114077 + -0.29314949988667094i, -0.15864862757095152 + 0.037267458312187855i, 0.09719004634051663 + -0.07565541504228371i }, { 0.01899823478631572 + -0.09620938482979559i, -0.046293269699074 + 0.03174837003565063i, -0.018495531202316954 + -0.09944921246227113i, -0.08607059015424316 + -0.15798489715261627i } }, Matrix{ { 0.06598630924830695 + -0.05113277241070389i, -0.023080208112350058 + -0.019058597354539714i, -0.12822332220176716 + -0.15446514419811197i, 0.14626394032122775 + -0.1729844147666929i }, { -0.14902314463468427 + -0.09924730576590249i, 0.0406104792475161 + 0.1213841894335737i, 0.17037359328067503 + -0.14784219930904202i, -0.1270347864255453 + -0.09183408904170795i }, { 0.12987337773851437 + -0.03829352332058599i, 0.0476436835906755 + 0.07583395898003174i, 0.06193949034172177 + -0.05672564416148054i, 0.01832019061481522 + -0.022843499740992965i }, { -0.03886837847175259 + 0.005614646291427401i, 0.13967134492526806 + -0.1618249881061464i, 0.03566152271564453 + 0.045795788571488416i, 0.060428517581108024 + -0.1083417047460073i } }, Matrix{ { -0.04029785944294366 + -0.06285753185597574i, 0.0782778470257441 + 0.052468651671452454i, -0.20126313675052443 + -0.03098623828220787i, 0.06741247276679606 + 0.058156256084352716i }, { 0.15699923216384679 + -0.01620601270279349i, 0.22622073095394407 + 0.09846444229701504i, 0.11626605323025258 + 0.025353843989511588i, -0.1920919710758602 + 0.0416708726446938i }, { 0.19306464774160548 + -0.026867437687028622i, 0.04557033136381929 + 0.02672554075705261i, -0.00264251539127134 + 0.007881586697638462i, 0.04258118801255257 + -0.028214019094785724i }, { -0.12311944234772916 + -0.07793382053935308i, -0.07673817043443813 + -0.0962715748680583i, 0.09071411100810756 + -0.10689613121860939i, 0.15163805096325256 + -0.09183201510324075i } }, Matrix{ { -0.17065920823993436 + -0.008996242097322325i, 0.08408740550309662 + -0.0020393583099338254i, 0.02297651989500575 + 0.12913059305532937i, -0.043957077362865915 + -0.12498399599651092i }, { -0.07591021682494906 + -0.03459902121369284i, -0.057055678429896575 + 0.0012616475000101382i, -0.03607963756131966 + -0.11991046814344128i, -0.11368237583608949 + -0.01390640353624329i }, { 0.0353089474989304 + 0.027776245203190796i, 0.00451504854430616 + -0.06713688395599923i, -0.001841174962632413 + -0.011455951201436984i, -0.0856487955479798 + -0.019872413830096355i }, { -0.13573315425999694 + 0.048023531016498484i, -0.00988207752000925 + -0.13189926329391136i, 0.040185329904068076 + -0.022207195178330492i, 0.13718268505581163 + -0.18884577230426114i } }, Matrix{ { -0.01603159929778609 + 0.10968579249032337i, 0.0488168720768275 + -0.13331864981022232i, 0.20137833261828195 + 0.04359656995283774i, -0.06615970227623641 + -0.03939828618783095i }, { -0.05041572665191518 + 0.03136549505245117i, -0.09865575870218829 + 0.06723978205424112i, 0.007682815081021477 + 0.16346725926498643i, 0.24053277230146497 + 0.019877740369742068i }, { 0.018196224971410272 + -0.10141361827104294i, 0.08779869178396099 + 0.009007637604664326i, 0.01615602705910115 + -0.05319475857725302i, 0.02313098123675218 + -0.0853932436132021i }, { 0.047253148640738554 + -0.030925073430972023i, -0.06071333577437851 + 0.08085109030440928i, 0.03298861323277923 + 0.10352318867342708i, -0.0623144405416069 + -0.18747712140997772i } }, Matrix{ { -0.032173891878010195 + -0.09485638857390981i, 0.05310600579130061 + 0.05845184481040584i, -0.019168894163603015 + 0.10441093502839004i, -0.02900611423285674 + -0.14102175600182834i }, { 0.025812910344882405 + -0.027913974392656592i, -0.05854700494083433 + 0.1329309715807235i, 0.13238110785791668 + -0.08093901664849662i, 0.20654377477087177 + 0.1473486997641754i }, { -0.056594208445636805 + 0.05475121146376518i, -0.10909476277776001 + 0.05999864732988239i, -0.12317853062279588 + -0.029260465241083933i, -0.1378899074202933 + 0.09081410115656605i }, { 0.02306376900047845 + -0.06525522566494377i, -0.01047084743364103 + -0.0777968614011542i, 0.0005591544598520237 + 0.06736879128525425i, -0.11526987541267825 + 0.14276782120198717i } }, Matrix{ { -0.12509258481055732 + 0.004598397250844874i, 0.032104555306039936 + -0.004012689922670227i, -0.1649554450551699 + -0.01703352828992283i, 0.03430958734917965 + 0.01567156039898407i }, { -0.0282615779923103 + -0.029985569913389153i, -0.01917315441920654 + -0.002044387604034751i, 0.024843964611498938 + -0.05762343909333679i, -0.1852766737153466 + 0.004989682481638843i }, { 0.025092360619281048 + -0.0065668779873226685i, -0.0015555864259384545 + 0.020069359643554902i, -0.04194666410740158 + 0.08577636331515759i, 0.016710327988281457 + -0.08439134011496421i }, { 0.11111665818572244 + -0.11748482895137179i, 0.12407223122114404 + -0.005049004792669179i, 0.02659297368774545 + -0.1423101724970484i, 0.008330934654584185 + 0.06411228673850654i } }, Matrix{ { -0.047623935352775024 + 0.05943702134343966i, 0.12443037041270143 + 0.12319919101997252i, -0.0715342529333966 + -0.023576018305226158i, -0.05330180423872267 + -0.14215377889013786i }, { 0.044084030918335036 + -0.06836831055696391i, -0.05766271068831963 + -0.03896479497369552i, -0.039597868661549206 + 0.06725994669979361i, 0.09670302320059297 + 0.03714752018262517i }, { 0.05743611643314113 + -0.01669230610809851i, -0.03658884554278676 + 0.06974484540611954i, -0.025388745403284972 + 0.05622598833273816i, -0.0588157399416789 + 0.016182851440361516i }, { -0.04626963997841639 + 0.06427861299035459i, -0.05297400025698372 + -0.07754065211693051i, -0.015713892976379335 + -0.07124266675482296i, 0.000942893546671896 + 0.10819066742862586i } }, Matrix{ { -0.08368387088325271 + -0.07388206456184604i, -0.07091970301362069 + -0.08534205773924883i, 0.163797459825837 + 0.010543105782573399i, 0.02769238155808256 + 0.009977288030441756i }, { -0.06431279086578877 + 0.11577031056208476i, -0.07889013093822561 + 0.0625839977912159i, 0.12605343685886233 + -0.053584017514221344i, 0.07885462805058015 + 0.03806716464874644i }, { 0.15354098662102217 + -0.04138146711085469i, 0.1344173071716203 + -0.13422668608732008i, 0.04504199244667371 + -0.08461144572703876i, 0.08073635785527679 + -0.026253151067864997i }, { 0.20943658431650855 + -0.07377434621937451i, -0.051644726109650874 + 0.006576582279618444i, -0.025675938018769977 + -0.048603610117473606i, -0.016412114906870008 + -0.022430892070246726i } }, Matrix{ { 0.11545711989633574 + 0.0646374312568776i, -0.0030737769770222394 + 0.0020874170618827665i, -0.02671211655418079 + -0.0326601152500172i, -0.02651706561314579 + -0.11505751404936428i }, { 0.03891678989068259 + 0.018752570806314876i, 0.02238250383505868 + -0.01423828947902279i, -0.01641176773856417 + 0.17727174460983489i, 0.07289863277643092 + -0.0029884146294240394i }, { 0.006695278786331901 + 0.06244262237231455i, 0.04608573333927964 + -0.1693960142958127i, -0.21243063872869516 + 0.01865143328361635i, 0.028327398959301076 + 0.026194458091415636i }, { -0.05591654958861681 + 0.09168036118649187i, -0.06462347861916128 + 0.013386253999675283i, 0.067619989806494 + -0.1027191695325004i, 0.0313255976504333 + -0.02723395650390511i } }, Matrix{ { -0.053528870282111445 + -0.011690565983595351i, 0.02702754141499139 + 0.0383771434219282i, -0.08286347424161958 + 0.027637776847423447i, -0.06819526821213058 + -0.062223712430374986i }, { 0.1754381631639474 + -0.15145086531838808i, 0.060935129242817826 + 0.1569917579391606i, 0.01658388995920105 + 0.13046518331693893i, 0.0743129335451111 + -0.07356991851840797i }, { -0.03952141776619073 + -0.10238081383086495i, -0.034778379634653175 + 0.08577913294000082i, -0.021824526645442655 + -0.1250999714267238i, 0.07007347004652334 + 0.008844817284669996i }, { 0.24564186498040771 + 0.034447272464446115i, -0.1822066779523605 + -0.025324236428197585i, 0.06672539705591636 + -0.11761484318858186i, -0.14640532701300726 + -0.012325828049510587i } }, Matrix{ { 0.02693570288939037 + 0.10844994360452435i, 0.06902962386856301 + 0.05913476446995908i, -0.08358497434873854 + 0.07470294396023691i, 0.042921372014033184 + -0.06226222175258941i }, { -0.16817888374399007 + -0.08683636425358678i, -0.10815812772592515 + 0.1277026128473132i, -0.05554940415665261 + -0.022748073588660076i, -0.12250564838463514 + -0.17401148155664048i }, { 0.018274905509765058 + 0.08309405324466658i, 0.05251880506950339 + 0.02476060621421643i, -0.21752343105169483 + 0.07992712121370471i, -0.10074633765090169 + -0.06586851286823109i }, { -0.17679881680567905 + -0.10362826126503706i, -0.044952945279734736 + -0.0054230158852197905i, -0.07168834099211806 + 0.05284903299417006i, -0.06446712652364282 + -0.00487067473144191i } }, Matrix{ { -0.026926152663451382 + -0.10397969136645428i, -0.02421299363771672 + -0.06673206439670579i, -0.0689503833950923 + -0.01317165684821461i, 0.026785564140462383 + -0.07770431091019565i }, { -0.05661316491800341 + -0.10473594074355633i, -0.039475801477480206 + 0.1871252034537383i, 0.010832344143105403 + -0.0013175001349154634i, -0.06625879706773305 + 0.04176633361826523i }, { -0.16784105063358187 + 0.004648026198329909i, -0.03319128136276636 + -0.16139777835509556i, 0.08007557650095036 + -0.06407213357680257i, -0.009699449154662643 + 0.00786185592862552i }, { 0.12079490967018981 + -0.03020539823391589i, 0.08128999560605203 + 0.08609266344120667i, 0.05024468757826633 + -0.05173693224741694i, 0.1436284482892264 + -0.0773952133032467i } }, Matrix{ { -0.06636803072718424 + 0.043329552753001904i, 0.058762705596535944 + -0.01784167563254531i, -0.03720381632199048 + 0.21973000971644252i, 0.13307248928322 + -0.003965592460828025i }, { 0.2157663865912023 + 0.00725643674043466i, 0.1856154691649132 + 0.05240420159244092i, -0.04093272611507158 + 0.08686515324082074i, -0.1299683475203621 + -0.044705522571408876i }, { 0.06468744851871863 + 0.04734194171192514i, -0.06263485143455093 + 0.11310794179204774i, -0.05980015093364367 + -0.042751574865114016i, 0.059894076348089485 + -0.006547236090823337i }, { 0.05268905254705264 + 0.07855685301858224i, -0.07515931766028015 + 0.028114606725905305i, 0.04601805550743721 + -0.14468832413264318i, 0.05489578569098502 + -0.014770419209362293i } } }, { QubitIndex{ 1 }, QubitIndex{ 4 } }));

    c.addInstruction(CircuitInstruction({ Matrix{ { 0.07238897332207639 + -0.11594899060474673i, -0.1472734521951956 + -0.10948343799408132i, 0.09709415500957377 + 0.008660453558737164i, -0.051627758165766785 + 0.01872907321035995i }, { -0.0767181999794811 + -0.014424710752514676i, -0.00671423462677415 + 0.002778573782729855i, 0.13046722595637414 + 0.1193326440006325i, 0.02624557550548174 + -0.07185164542766084i }, { 0.015434966964847223 + -0.03152796996305993i, -0.0016798987365857284 + 0.00022782316920696738i, -0.06582809890440777 + 0.10475582971871247i, 0.06454206196889775 + -0.07324819359091768i }, { -0.09994313930655872 + -0.07722669725040152i, 0.00542377461572188 + 0.0012396061995984208i, -0.004433596696571351 + -0.03826995238424438i, -0.028598958383101784 + 0.10350006812119623i } }, Matrix{ { -0.037987329914800014 + 0.06314151875342676i, -0.007038221624130253 + -0.1227735923302237i, 0.1429387549213916 + 0.044570532591071535i, 0.06598079099998506 + -0.17727098732172658i }, { 0.08606448823244947 + -0.04429625649607486i, -0.012806272931416 + 0.0531815356269321i, 0.09983659325383523 + -0.1292875301739727i, 0.06950222332955865 + 0.06758049678227723i }, { 0.11532395923912575 + 0.024364369096700145i, 0.012392640513932397 + 0.020698866882333543i, 0.18909467497911844 + 0.11425381909462601i, 0.11780499048361577 + 0.039885699271374454i }, { -0.1108368214508231 + 0.05078283650559447i, -0.027937753867909764 + 0.07625849074532842i, 0.049952880815760846 + 0.05785021112695482i, 0.029625866807792594 + -0.0974630680694888i } }, Matrix{ { -0.018779013677431247 + 0.11721432159166412i, -0.11953976276610148 + 0.003285553520306437i, -0.048602945311077755 + 0.09953274333975481i, 0.05557468081934789 + 0.0031413485416744258i }, { 0.10533621893520606 + -0.06889018167111977i, -0.09230280534240799 + 0.05577214043919681i, 0.03461627948400633 + 0.07941088350002315i, 0.0007305398620730863 + -0.08751806157599328i }, { -0.1213473001260067 + 0.07379170452128092i, 0.013866971029674177 + -0.10951441088088917i, 0.09184918306058164 + 0.06842993655514573i, 0.10977401335396006 + -0.10859864709084774i }, { -0.05127772910988953 + -0.04241208488107705i, -0.02387582222687167 + -0.06414792642922429i, 0.029927258023956082 + 0.0681121874349826i, 0.033341591227429745 + 0.04229836236297618i } }, Matrix{ { -0.07274788817593918 + -0.109000547001787i, -0.037352241740505464 + 0.09136114114851619i, -0.01005220191443629 + 0.09423794541710027i, 0.08010036862590621 + -0.14198364831730234i }, { -0.019317749050433375 + 0.08178107535142175i, -0.10275938279392069 + -0.24246490651838257i, -0.154809667745792 + -0.0479621441350349i, -0.010857951335279734 + -0.27630877394511005i }, { -0.06402879401546922 + -0.20744451743993603i, -0.13645671668089385 + 0.04912431670651975i, 0.04726671970525789 + -0.07204766937780403i, -0.13244495584827878 + 0.01949525948712712i }, { -0.22872240158349352 + -0.018858233771187567i, -0.0685183109927247 + 0.06843411408409304i, -0.14026104669770115 + 0.11062236977183097i, -0.1515833658373707 + -0.04752780786305046i } }, Matrix{ { -0.00032897586646489854 + -0.04741011428300955i, -0.012374753619616532 + -0.019071338052618292i, -0.1608562786035389 + -0.0601066644771461i, 0.14560105456521683 + -0.09235782931354342i }, { 0.10639847969006433 + -0.011873276140105193i, -0.05464245929073403 + -0.04015779449539782i, 0.03038851480213514 + -0.008772826663571865i, -0.04001462302948229 + 0.019006650438651032i }, { -0.006268814500079594 + -0.11969230927733457i, 0.0218104728920141 + 3.0830802478069003e-06i, -0.02108103370447602 + 0.006582790936339903i, 0.0038879662312315917 + 0.04377300217934041i }, { -0.01784831520813938 + 0.12028551065878842i, -0.10023014908419738 + 0.08287904685127523i, -0.20861082127513947 + -0.1397607148132819i, -0.004172761933615618 + -0.10894782980515812i } }, Matrix{ { 0.059523375889756744 + -0.087513170003367i, -0.017826378145129926 + 0.1971272013082864i, -0.007326072302890745 + -0.030349993681566854i, -0.0013208790760312183 + -0.10877630889094766i }, { 0.019064027101206884 + -0.13623930649785904i, 0.1382639695587391 + 0.025649548374257813i, -0.05592590984216527 + -0.000554820927663509i, 0.037055901620159044 + -0.029793445281330058i }, { 0.04271724840412679 + 0.08159901385504471i, -0.0857780144821432 + 0.043568100020265926i, 0.0633675438494836 + 0.13743528152447107i, 0.04939336613121688 + 0.011758462992278404i }, { -0.03233511380461517 + 0.09017470748687477i, 0.01852804595351967 + 0.052491682673302384i, 0.12541959233800642 + -0.1414604488203848i, -0.04550871883623188 + 0.013069358938057548i } }, Matrix{ { 0.039720157932034414 + -0.0016304720820587123i, -0.04705950953050607 + 0.015426999225003913i, 0.07766257780240896 + -0.018610303682444897i, 0.11406242787678986 + 0.06896376557431959i }, { -0.07143515090587452 + -0.04703194679900424i, -0.07065852082151518 + -0.06817475813234236i, 0.11191461243283286 + -0.045263639587482606i, -0.02876601457048298 + -0.0883178924302499i }, { -0.19111431891902025 + 0.023318194219440713i, 0.12894066756595607 + 0.08431825351929093i, 0.030969801586859056 + -0.09843678533446408i, -0.012263202007227638 + 0.024111940938135235i }, { 0.014412879005252538 + 0.01540671416520833i, -0.042252077278636044 + -0.13485891576031483i, -0.003950633143132989 + 0.13599433001071864i, -0.014563961901719057 + 0.2006297253604744i } }, Matrix{ { -0.012405841501164968 + -0.04626420795882206i, -0.09775120093420916 + -0.07984660346279153i, 0.09378130493474357 + -0.036615163373733384i, -0.11485205284465613 + 0.0842212696190224i }, { 0.022466542688049342 + 0.06873074892103757i, -0.056231037677017356 + 0.1339793955217967i, 0.00048118079727412085 + 0.024161100432986294i, -0.03419696716921276 + 0.06227794562821636i }, { -0.010723761445111748 + -0.10527851408077936i, 0.07374163576717775 + -0.15398860208750675i, 0.04501020187710201 + 0.058327827515205564i, 0.06256366988241906 + 0.018004446669178116i }, { -0.022414834795306246 + 0.14171808185792467i, 0.0005588319217420694 + 0.16353341962989126i, -0.03660470684517194 + -0.04324129278699766i, 0.03754330234815945 + -0.026824807760219144i } }, Matrix{ { 0.07145807012191412 + 0.13819474395438455i, -0.10317481703501041 + -0.03384481083078136i, -0.030944755505680304 + 0.005952464534644652i, 0.05236829507860915 + 0.038991142296474005i }, { -0.07240307879169706 + 0.07207132823536498i, 0.047943811188225674 + -0.0024362373201008295i, -0.14125953279374537 + 0.016953236734017423i, -0.030443972101509176 + -0.02401258336819725i }, { 0.03317997450167828 + -0.269458368426498i, -0.013347555085115129 + 0.10231526987460454i, -0.09412633697746724 + -0.040783853624981097i, -0.16266180438067718 + 0.017625882254830357i }, { 0.030227536925468174 + 0.06941365453391139i, -0.0805973876014248 + -0.18131904097194762i, 0.17711381533922935 + -0.10679062483600131i, -0.010703684983814106 + 0.090639159974645i } }, Matrix{ { -0.06172185098891401 + -0.1124249718718292i, -0.015843217892953617 + 0.030731773312263882i, 0.11759717436891079 + -0.035619323849490306i, 0.01261551307937338 + -0.11738284390734258i }, { 0.041286786399240896 + -0.040475446009941726i, -0.04399488274244176 + -0.12466767082019281i, -0.07171108462334981 + -0.027494044395657453i, -0.09477846283957199 + 0.16113377092892117i }, { -0.026847428573407016 + 0.07223867186346707i, -0.11670845691041512 + -0.07858693218099673i, -0.19529791257561815 + 0.09207605204042262i, 0.14398547956311014 + 0.04806977730410545i }, { 0.021940593116554614 + -0.07255244061963019i, 0.05018853020645051 + 0.05313313449619933i, 0.0907286533614362 + -0.09414926727154019i, 0.013338429889754626 + 0.13734021067978106i } }, Matrix{ { -0.0453023284865563 + 0.03782245841047527i, 0.035806415724969974 + -0.06923034138425828i, -0.11644311779947678 + -0.06653103203463392i, -0.10070852510133156 + -0.0961689485675773i }, { -0.05118099006022467 + -0.08735695538126724i, 0.026730964674670496 + -0.028725547826080097i, 0.0168675190933965 + -0.04321703317529394i, 0.07594678404680097 + -0.03788070323469934i }, { 0.10384953833547592 + -0.1446060275639576i, 0.04419029697116149 + -0.15799512115958741i, -0.0005686999496220855 + 0.05858634244839055i, 0.04053355044211511 + 0.03354775106985586i }, { 0.13171646018956923 + -0.11848497379711447i, 0.14166098391997653 + -0.13285105579522777i, -0.015029863829673919 + -0.00032483820153367477i, 0.10859375630661994 + 0.028889004464695733i } }, Matrix{ { 0.019270419057140248 + -0.06122836289549354i, 0.1553706902313057 + -0.13717904642721812i, 0.08152009190558648 + -0.04012893534270494i, -0.06979576292379853 + -0.07099476500416035i }, { 0.027535856219622443 + 0.044217094048366976i, 0.0780825621616921 + -0.007143044792850296i, 0.08979790930205248 + -0.11134878144505189i, -0.0203777300583009 + 0.01447957751972133i }, { -0.1910221045606791 + -0.010928263103085638i, -0.11329873791925212 + -0.00506266017052894i, -0.14308360695284017 + -0.0325820723517042i, 0.06819214904006085 + 0.14545708893487838i }, { -0.0343790310839256 + -0.021347404937884455i, 0.02641354499023479 + 0.15983668787088315i, 0.020350166725386032 + -0.13399788663917206i, 0.06065310527610665 + 0.01709773837815564i } }, Matrix{ { -0.13537799552983287 + 0.07795825529800925i, -0.0026052835189319685 + -0.11473436546967596i, 0.20021171664648796 + -3.407482557368465e-05i, -0.041733868119819245 + 0.10924986529941975i }, { -0.023855546994945596 + 0.023955107658717285i, 0.09348605889930349 + 0.021685702879215996i, -0.06070123611624845 + -0.11857231158972763i, -0.018646124002908174 + -0.10340325305770744i }, { 0.13666228613087955 + 0.02744966085561496i, -0.10660374930030068 + -0.12390414523660619i, -0.03155103872637243 + -0.053640297187285926i, 0.05477978101286533 + 0.18655709065707304i }, { 0.11062793814390809 + -0.14084834896704415i, -0.1328733312459162 + 0.0016633085899344644i, -0.04676763623244483 + 0.06733539456063212i, 0.024259445989780706 + -0.016831634810963822i } }, Matrix{ { -0.002651211819730899 + 0.005609816241836083i, -0.028139929809984955 + -0.04933748097897469i, 0.014010728348189803 + 0.1571306792420499i, 0.06984690985599848 + 0.17177450832057967i }, { 0.1516386999523672 + 0.06974018977158573i, 0.015787127402413757 + -0.1862173936460395i, 0.09024015626663569 + -0.051885415379124465i, -0.10015647553033886 + -0.19112277842354913i }, { -0.06285117656091758 + 0.0372384304676836i, -0.10471425537793982 + 0.016740189823812104i, 0.06122228052566543 + 0.059868196785177574i, -0.024812552405569555 + -0.14818199388761813i }, { -0.00970847749032093 + -0.13766071661506302i, -0.054952109511423784 + -0.08484972482006835i, 0.03589994091341081 + -0.017831698068510198i, 0.018217809166479373 + 0.014029281312630043i } }, Matrix{ { 0.11470550065871046 + -0.15373219527937568i, 0.0728454572893596 + 0.07482094920446918i, 0.025435187365586722 + -0.026185150497377005i, 0.2599785560731514 + 0.1453606042964628i }, { 0.03920140624953562 + -0.010315038748356776i, 0.13530878049945338 + -0.12367238878211152i, -0.1174244684707705 + -0.11391134136032277i, -0.07452084917249333 + 0.03722069739397094i }, { -0.07767632083041108 + 0.007105017360737436i, -0.07519526688655474 + 0.099177803356223i, -0.12355987792670894 + 0.1554205652813739i, -0.029933794216833426 + 0.022322394133780767i }, { -0.004076989431850444 + 0.03234546039131771i, -0.11050246377332808 + -0.012297871238791322i, 0.019633231016830652 + -0.10359204527056368i, 0.01978643589862409 + 0.041206860146355384i } }, Matrix{ { -0.11445484077757596 + 0.046570902335373844i, 0.008111706646809665 + -0.1165382195335641i, 0.09232473990474607 + 0.059732972168664786i, -0.0329782683271466 + -0.03287465826966493i }, { 0.13046167012424056 + 0.005341292783095761i, -0.06672348627834886 + -0.08150555932517971i, -0.11503890226613599 + 0.10521340105355774i, 0.03512720063998811 + -0.18272806213379744i }, { -0.24963075062309478 + -0.0520237248713636i, 0.05117504029533213 + -0.15150051773802364i, 0.11498690913960728 + 0.034903805480496576i, 0.0183460694721916 + 0.17853746638324508i }, { 0.1069783110013765 + 0.09161969057483435i, 0.14515052664162267 + 0.08711349057936472i, -0.06791110725267945 + -0.024664555125684096i, -0.0028003904846538993 + 0.04361843692545286i } } }, { QubitIndex{ 5 }, QubitIndex{ 0 } }));

    c.addInstruction(CircuitInstruction({ Matrix{ { -0.25765848914650324 + -0.2246710314123103i, 0.1530248923310869 + 0.16386897217464608i }, { -0.19089899850748565 + 0.3720644540913523i, -0.19056544117527024 + -0.4688869578056692i } }, Matrix{ { -0.1398877503428823 + 0.24456930716707573i, -0.15412301291604413 + 0.04497510955203154i }, { -0.0247002329679562 + 0.09626427492930097i, -0.39479814129598495 + -0.05835086541648159i } }, Matrix{ { -0.04093247639030154 + -0.24011688807021808i, -0.25010115597578114 + -0.4753176558885038i }, { 0.2400548382782171 + 0.10421282433926528i, 0.127386506968076 + -0.041973796696637033i } }, Matrix{ { 0.667206580076943 + -0.02118561055424424i, -0.07464699530255534 + -0.271445040990355i }, { -0.2088789883092269 + -0.04403289790342775i, -0.30350354496813964 + -0.17515006788221626i } } }, { QubitIndex{ 0 } }));

    c.addInstruction(CircuitInstruction({ Matrix{ { 0.19404960614591849 + -0.05578466747270068i, 0.37181114748267197 + 0.04852259196916254i }, { 0.08742944588852668 + -0.11138120014820573i, 0.23630200678325203 + -0.006057961050268235i } }, Matrix{ { 0.1392239537037766 + -0.4275052733695888i, 0.029397980344724683 + 0.18066098997792443i }, { -0.24573519908044514 + 0.2667829926897297i, 0.35720645062571593 + 0.3336067620548354i } }, Matrix{ { 0.10403350027045444 + -0.5565406657902904i, 0.15163025921881917 + 0.05529411176902582i }, { -0.19168488766761324 + 0.04746403832612351i, 0.18390133941710302 + -0.31446923360135765i } }, Matrix{ { 0.22909692733662199 + 0.15311256372763604i, -0.37310273823354984 + 0.1676376541100679i }, { 0.14627337357769019 + 0.38548534099250886i, 0.43965836883007675 + 0.1084750814947991i } } }, { QubitIndex{ 4 } }));

    c.addInstruction(CircuitInstruction({ Matrix{ { -0.0635066633705772 + 0.3076583010164696i, -0.18751967087029175 + -0.15072157559378718i }, { -0.5188833502092364 + -0.010997722911053498i, 0.2035327099810568 + -0.06789921478304708i } }, Matrix{ { 0.4001328492019142 + -0.11955640722322548i, 0.1998501912720597 + 0.049517324012534725i }, { -0.30072620564083047 + 0.07593612854754653i, -0.28687002686095364 + -0.10528866601660647i } }, Matrix{ { -0.0259057787395445 + 0.0412572507227216i, -0.43013088237454633 + 0.5160383998002022i }, { -0.31508508249708544 + -0.25823499188837096i, -0.0898277743619044 + 0.5124630289316344i } }, Matrix{ { 0.16700879204555646 + -0.3995057346070655i, 0.02759055723780819 + -0.14715208597712287i }, { 0.06474942419888154 + -0.0363781211376083i, -0.10932164204385296 + -0.06284540294008417i } } }, { QubitIndex{ 0 } }));


    
    return c;
}

TEST(RandomizedIntegrationTests, 6_5_2_100_0_0) {
    auto c = randomCircuit();

    c.execute();
}
}

}
