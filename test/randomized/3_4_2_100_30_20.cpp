#include <gtest/gtest.h>

#include "superpositeur/Circuit.hpp"
#include "superpositeur/DefaultOperations.hpp"

namespace superpositeur {
namespace {
Circuit randomCircuit() {
    using namespace std::complex_literals;

    Circuit c;
    c.addInstruction(CircuitInstruction({ Matrix{ { -0.002551430708024327 + -0.3194569797078468i, -0.07470193499339242 + 0.587511903901566i }, { 0.09779486040621987 + 0.015633015319773114i, -0.26121297337863236 + -0.08402764752123848i } }, Matrix{ { 0.20479398490036343 + 0.058692174252880064i, 0.3558216335633213 + 0.0613515840833008i }, { 0.23938453619061645 + -0.3207601461890497i, -0.05529758006606625 + -0.2620768194631632i } }, Matrix{ { 0.4810819350481884 + -0.1648419166519917i, -0.16375278132177773 + 0.17548134234266255i }, { 0.2604589029729853 + -0.3114784039113847i, 0.24543779563740353 + -0.11085019643637536i } }, Matrix{ { 0.26695418059771825 + 0.1401016903990969i, -0.09327477648297933 + 0.3936959596166i }, { 0.034293104608553726 + -0.4086756294860772i, -0.24545046397880865 + -0.13327644930189367i } } }, { QubitIndex{ 1 } }));

    c.addInstruction(CircuitInstruction({ Matrix{ { 0.03036101645971256 + 0.2919149595019437i, 0.24608267935085937 + 0.2522395957531728i }, { 0.5483192424820134 + -0.3484189542769851i, -0.3750035485470619 + -0.13640641791385155i } }, Matrix{ { 0.15762401794051487 + 0.08870548287209211i, -0.20137572990003844 + -0.030552881492239392i }, { -0.10903378840160281 + 0.12119548208704539i, 0.03458432508795005 + 0.10648529812854535i } }, Matrix{ { 0.4905646947244857 + 0.09383141832262784i, -0.236273383393639 + 0.3232511296778894i }, { 0.28465715317089857 + 0.12202835687621186i, 0.4879904819803986 + 0.1349572104059659i } }, Matrix{ { -0.2884707026497015 + -0.057951620139092545i, -0.014671765498002608 + -0.41084666583238516i }, { -0.016281823679997934 + -0.01748989005276123i, -0.2772729537750374 + 0.0028589266086261576i } } }, { QubitIndex{ 2 } }));

    c.addInstruction(CircuitInstruction({ default_operations::CNOT }, { QubitIndex{ 1 }, QubitIndex{ 2 } }));

    c.addInstruction(CircuitInstruction({ Matrix{ { 0.16630718407763867 + -0.24862895601418392i, -0.09806350826258962 + -0.14188606716680266i }, { 0.275349633639288 + 0.10700374243560051i, 0.17031165369116397 + -0.07654115211006363i } }, Matrix{ { 0.39399959346597446 + -0.088700780165798i, -0.06794898592753158 + 0.5621810734976643i }, { -0.5431519663550141 + -0.03699153701051955i, 0.04124222037611351 + 0.3467693640112932i } }, Matrix{ { -0.49827525909620074 + -0.22702493140667346i, -0.02027333912409128 + 0.013034325927097731i }, { 0.07841322196761658 + -0.05530342818309146i, 0.27996523036250076 + 0.42093805571650417i } }, Matrix{ { 0.09160460304365556 + -0.17543295530577172i, -0.06263006957664094 + -0.029821204066469802i }, { 0.04686717360744974 + -0.1156809741144427i, 0.40661904223058704 + -0.25782085654636017i } } }, { QubitIndex{ 2 } }));


    
    return c;
}

TEST(RandomizedIntegrationTests, 3_4_2_100_30_20) {
    auto c = randomCircuit();

    c.execute();
}
}

}
